import { useState, useEffect  } from 'react';
import {useNavigate} from "react-router-dom";

    
    const navigate = useNavigate();
    
    const [user, setUser] = useState({
        email: "",
        password: ""
      });

      const fieldChange = async (e) =>{
        setUser({...user, [e.target.name]:e.target.value} )
    };

    const loginSubmit = async (e)=>{
        e.preventDefault();
            const res = await fetch("http://localhost:8000/login",{
            method: "POST",
            body: JSON.stringify(user),
            headers: {"Content-Type": "application/json"}
        });
        const resData = await res.json();
        if(resData.message === "El email ingresado no existe"){
            console.log("El email ingresado aun no ha sido registrado");
        }else if(resData.message === "Contraseña incorrecta"){
            console.log("Contraseña incorrecta");
        }else{
            console.log("logeado el user con id:"+resData);
            navigate("/menu/"+resData);
        }
    
 
    }

    export {fieldChange, loginSubmit};



